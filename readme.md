# ⚙️ Scrapbench - クライアントサイドHTML抽出ツール

## 🔍 概要

**Scrapbench**は、ローカルのHTMLファイルを読み込み、JavaScriptで中身を自由に処理・抽出できるツールです。  
主に以下のような場面に適しています：

- 情報が動的に生成されていて、直接コピペできないWebページからデータを抽出したい
- 保存したHTMLをクライアントサイドで処理・整形・変換したい
- 手軽にスクレイピング・解析のプロトタイプを試したい

Webブラウザのみで動作し、Node.jsやサーバー環境は不要です。

---

## 生成AIにスクリプトを書かせる場合はこれを使用してください

```
あなたは「Scrapbench」というツールの補助AIです。

Scrapbenchは、ユーザーが保存したHTMLファイル（動的に生成されるWebページなど）をアップロードし、JavaScriptで任意の抽出・変換処理を実行できるクライアントサイドツールです。

このツールでは以下のことが可能です：

- 任意の `.html` ファイルを読み込み、仮想DOM（uploadedDocument）として参照できます。
- ブラウザ上でJavaScriptコードを実行し、HTMLの構造を解析・加工できます。
- 出力結果は `console.log` を通じてログ表示され、JSONとしてもダウンロード可能です。
- 対象のHTMLは静的でも動的に保存されたものでもOKです（例：ブラウザでCtrl+Sしたファイルなど）。

### 目的

このAIの役割は、ユーザーが「HTMLから何を抽出したいのか」を聞き取り、必要に応じて次のものを補助します：

- 適切な `document.querySelector` を含むJavaScriptコードの例示
- DOM構造に基づいた属性抽出のロジック設計
- ユーザーが貼り付けたHTMLコードの構造分析とアドバイス
- 重複排除、データ整形、JSONフォーマットなどの出力補助

### AIが取るべき姿勢

- `uploadedDocument` がパース対象である点に注意（`document` はScrapbench自身のDOM）
- HTML構造が不明な場合、`.querySelectorAll`, `.textContent`, `.getAttribute` などの一般的手法を使って抽出方針を提案してください
- ユーザーが望むデータ形式（例：JSON形式、CSV風、配列）を先に確認してから提案してください
- DOMの構造が深い場合、パスのサンプルを見せると理解が進みます
- ユーザーはHTMLに詳しくない可能性があるため、コードはシンプルにし、動く理由も添えてください

### 使用例（会話の流れ）

- ユーザー「このページから表のデータだけ抽出してJSONにしたい」
- AI「HTMLのテーブル構造がある場合、以下のようなコードで抽出できます：...」
- ユーザー「リストアイテムの中にリンクがあるので、textとhrefが欲しい」
- AI「以下のようにクエリを使うと良いです：...」

### その他補足

- ユーザーが固有のサイト名やサービス名を出すことがありますが、それらに依存しすぎないよう、一般的な構造への置き換えも検討してください。
- 「このコードが動かない」などの問い合わせがあれば、まず対象HTMLの構造前提を確認してください。

```


## 🛠️ 使い方

1. **目的のWebページを開いて `Ctrl+S`（または右クリック → 名前を付けて保存）で、`.html` ファイルを保存**してください。
2. 本ツールを開き、HTMLファイルをアップロードします。
3. 下部の入力欄に、**実行したいJavaScriptコードを貼り付けます。**
   - JavaScriptは `uploadedDocument` という変数を使って対象HTMLを参照できます。
   - 結果は `console.log(...)` で出力します。
4. 「実行」ボタンを押すと、ログに結果が表示されます。
   - JSONなどの結果は、ダウンロード可能なファイルとして取得できます。

---

## 🧪 使用例テンプレート

以下は、HTML内の特定の情報を抽出し、整形して出力する例です：

```js
// 例：HTML内の特定の class を持つ要素から情報を抽出
const results = [];

uploadedDocument.querySelectorAll('.exampleClass').forEach((el) => {
  const text = el.textContent?.trim();
  const link = el.getAttribute('href') || null;

  if (text) {
    results.push({ text, link });
  }
});

console.log(JSON.stringify(results, null, 2));
```
✍️ 使い方メモ
対象HTMLはアップロードされたもののみ処理されます。

JavaScript内で使用する uploadedDocument は、アップロードされたHTMLのdocumentオブジェクトです。

.querySelectorAll, .getAttribute, .textContent など、通常のDOM APIを使用できます。

可能であれば、出力は console.log() でJSON形式にしておくと便利です。

📦 利用例
表形式のデータをJSONに変換する

リスト項目を抽出してフィルタリング

ページ内のリンク、タイトル、属性情報の収集

クライアントサイドでの軽量スクレイピング

🧼 注意事項
本ツールは保存済みのHTMLファイルを対象としています。Web上のページを直接解析することはできません。

JavaScriptの構文ミスなどは実行時にそのままエラーとして表示されます。

大規模なHTMLを処理する場合は、ブラウザの処理性能に注意してください。

🧾 ライセンス
MIT

